{"version":3,"sources":["webpack:///./node_modules/@presto-player/components/dist/custom-elements/tutor.js"],"names":["player","sync_time","instance","options","_tutorobject4","post_id","getVideoData","data","action","currentTime","duration","_tutorobject","nonce_key","data_send","Object","assign","jQuery","post","ajaxurl","video_track_data","val","JSON","parse","tempTimeNow","on","event","detail","plyr","video_data","is_ended","autoload_next_course_content","_tutorobject2","_tutorobject3","done","response","_response$data","success","next_url","location","href","autoload_content"],"mappings":";;;;;;;;;;;;;;;;;mIAAA,OAOoO,UAPpO,SAAeA,GACf,IACIC,EAAU,SAAmBC,EAASC,GAAS,IAAIC,EAAkBC,EAAQC,IAAeD,QAAYE,EAAK,CAACC,OAAO,sBAAsBC,YAAYP,EAASO,YAAYC,SAASR,EAASQ,SAASL,QAAQA,GAASE,EAAKI,aAAaC,WAAWD,aAAaA,aAAaC,WAAW,IAAIC,EAAUN,EAAQJ,IAASU,EAAUC,OAAOC,OAAOR,EAAKJ,IAAUa,OAAOC,KAAoC,QAA9Bb,EAAcO,oBAAsC,IAAhBP,OAAuB,EAAOA,EAAcc,QAAQL,IACrcP,EAAa,WAAwB,IAAIa,EAAiBH,OAAO,qCAAqCI,MAAM,OAAOD,EAAiBE,KAAKC,MAAMH,GAAkB,IACjKI,EAAY,EAChBvB,EAAOwB,GAAG,cAAa,SAASC,GAAO,IAAIvB,EAASuB,EAAMC,OAAOC,KAA0BJ,EAAY,GADjE,KAEAtB,EAAUC,GAAUqB,EAAY,GAAGA,OACzEvB,EAAOwB,GAAG,SAAQ,SAASC,GAAO,IAAIG,EAAWtB,IAAmBJ,EAASuB,EAAMC,OAAOC,KAA8B1B,EAAUC,EAA1B,CAAC2B,UAAS,IAAkCD,EAAWE,8BAN1I,WAA4B,IAAIC,EAAcC,EAAc,GAAIrB,aAAaC,WAA4C,QAA9BmB,EAAcpB,oBAAsC,IAAhBoB,GAAwBA,EAAcb,QAAzG,CAA2H,IAAuCX,EAAK,CAACC,OAAO,+BAA+BH,QAAvEC,IAAeD,SAAyEE,EAAKI,aAAaC,WAAWD,aAAaA,aAAaC,WAAWI,OAAOC,KAAoC,QAA9Be,EAAcrB,oBAAsC,IAAhBqB,OAAuB,EAAOA,EAAcd,QAAQX,GAAM0B,MAAK,SAASC,GAAU,IAAIC,EAAkBD,SAAoCA,EAASE,SAA7CF,MAAsDA,GAAqE,QAAhCC,EAAeD,EAAS3B,YAA+B,IAAjB4B,GAAyBA,EAAeE,WAAUC,SAASC,KAAKL,EAAS3B,KAAK8B,cAM7hBG","file":"analytics/6-952599ce.js","sourcesContent":["function tutor(player){// autoload course content\nvar autoload_content=function autoload_content(){var _tutorobject2,_tutorobject3;if(!_tutorobject.nonce_key||!((_tutorobject2=_tutorobject)!==null&&_tutorobject2!==void 0&&_tutorobject2.ajaxurl)){return;}var post_id=getVideoData().post_id;var data={action:'autoload_next_course_content',post_id:post_id};data[_tutorobject.nonce_key]=_tutorobject[_tutorobject.nonce_key];jQuery.post((_tutorobject3=_tutorobject)===null||_tutorobject3===void 0?void 0:_tutorobject3.ajaxurl,data).done(function(response){var _response$data;if(response!==null&&response!==void 0&&response.success&&response!==null&&response!==void 0&&(_response$data=response.data)!==null&&_response$data!==void 0&&_response$data.next_url){location.href=response.data.next_url;}});};// sync time with server\nvar sync_time=function sync_time(instance,options){var _tutorobject4;var post_id=getVideoData().post_id;var data={action:'sync_video_playback',currentTime:instance.currentTime,duration:instance.duration,post_id:post_id};data[_tutorobject.nonce_key]=_tutorobject[_tutorobject.nonce_key];var data_send=data;if(options){data_send=Object.assign(data,options);}jQuery.post((_tutorobject4=_tutorobject)===null||_tutorobject4===void 0?void 0:_tutorobject4.ajaxurl,data_send);};// get video data\nvar getVideoData=function getVideoData(){var video_track_data=jQuery('#tutor_video_tracking_information').val();return video_track_data?JSON.parse(video_track_data):{};};// update time on server every 250ms\nvar tempTimeNow=0;var intervalSeconds=30;//Send to tutor backend about video playing time in this interval\nplayer.on('timeupdate',function(event){var instance=event.detail.plyr;var tempTimeNowInSec=tempTimeNow/4;//timeupdate firing 250ms interval\nif(tempTimeNowInSec>=intervalSeconds){sync_time(instance);tempTimeNow=0;}tempTimeNow++;});// on end, sync time and autoload content\nplayer.on('ended',function(event){var video_data=getVideoData();var instance=event.detail.plyr;var data={is_ended:true};sync_time(instance,data);if(video_data.autoload_next_course_content){autoload_content();}});}export default tutor;"],"sourceRoot":""}