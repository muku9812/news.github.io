{"version":3,"sources":["webpack:///./node_modules/@presto-player/components/dist/custom-elements/learndash.js"],"names":["player","_learndash_video_data","_prestoPlayer","_prestoPlayer$learnda","_learndash_video_data2","_prestoPlayer2","_prestoPlayer2$learnd","_prestoPlayer3","_prestoPlayer3$learnd","_prestoPlayer4","_prestoPlayer4$learnd","_learndash_video_data3","learndash_video_data","videos_found_provider","window","videos_auto_complete","prestoPlayer","learndash","lesson_video_auto_complete","videos_hide_complete_button","videos_shown","lesson_video_hide_complete_button","videos_auto_complete_delay","lesson_video_auto_complete_delay","videos_auto_complete_delay_message","video_track_path","jQuery","document","trigger","video_debug","console","log","querySelectorAll","length","LearnDash_disable_assets","LearnDash_watchPlayers","forEach","element","index","element_key","element_id","getAttribute","setAttribute","ld_video_players","closest","LearnDash_Video_Progress_initSettings","LearnDash_Video_Progress_getSetting","LearnDash_watchPlayersEnd","wp","hooks","addAction","LearnDash_Video_Progress_setSetting","duration","currentTime"],"mappings":"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","file":"analytics/5-f9cd8bb2.js","sourcesContent":["import{r as resumeProgress}from'./index.js';var learndash=function learndash(player){var _learndash_video_data,_prestoPlayer,_prestoPlayer$learnda,_learndash_video_data2,_prestoPlayer2,_prestoPlayer2$learnd,_prestoPlayer3,_prestoPlayer3$learnd,_prestoPlayer4,_prestoPlayer4$learnd,_learndash_video_data3;if(typeof learndash_video_data==='undefined'||((_learndash_video_data=learndash_video_data)===null||_learndash_video_data===void 0?void 0:_learndash_video_data.videos_found_provider)!=='presto'){return;}resumeProgress(player);// maybe resume progress\n// Learndash has this logic in a shitty method on their php class\n// we have to fake it here since we don't have access to it\nwindow.learndash_video_data.videos_auto_complete=((_prestoPlayer=prestoPlayer)===null||_prestoPlayer===void 0?void 0:(_prestoPlayer$learnda=_prestoPlayer.learndash)===null||_prestoPlayer$learnda===void 0?void 0:_prestoPlayer$learnda.lesson_video_auto_complete)==='on';window.learndash_video_data.videos_hide_complete_button='AFTER'===((_learndash_video_data2=learndash_video_data)===null||_learndash_video_data2===void 0?void 0:_learndash_video_data2.videos_shown)&&((_prestoPlayer2=prestoPlayer)===null||_prestoPlayer2===void 0?void 0:(_prestoPlayer2$learnd=_prestoPlayer2.learndash)===null||_prestoPlayer2$learnd===void 0?void 0:_prestoPlayer2$learnd.lesson_video_hide_complete_button)==='on';window.learndash_video_data.videos_auto_complete_delay=(_prestoPlayer3=prestoPlayer)===null||_prestoPlayer3===void 0?void 0:(_prestoPlayer3$learnd=_prestoPlayer3.learndash)===null||_prestoPlayer3$learnd===void 0?void 0:_prestoPlayer3$learnd.lesson_video_auto_complete_delay;window.learndash_video_data.videos_auto_complete_delay_message=(_prestoPlayer4=prestoPlayer)===null||_prestoPlayer4===void 0?void 0:(_prestoPlayer4$learnd=_prestoPlayer4.learndash)===null||_prestoPlayer4$learnd===void 0?void 0:_prestoPlayer4$learnd.videos_auto_complete_delay_message;// Temporarily set the video track path to '/' to set the cookie globally\nwindow.learndash_video_data.video_track_path='/';// Learndash has this logic in a shitty method on their php class\n// we have to fake it here since we don't have access to it\nif('BEFORE'===((_learndash_video_data3=learndash_video_data)===null||_learndash_video_data3===void 0?void 0:_learndash_video_data3.videos_shown)){learndash_video_data.videos_auto_complete=false;jQuery(document).trigger('learndash_video_disable_assets',[true]);// Set learndash video players\njQuery(function(){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: init');}if(document.querySelectorAll('presto-player[data-video-progression=\"true\"][data-video-provider=\"'+learndash_video_data.videos_found_provider+'\"]').length){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: calling LearnDash_disable_assets(true)');}// Disable learndash assets and watch players.\nLearnDash_disable_assets(true);LearnDash_watchPlayers();// Go through all the <presto-player> instances\ndocument.querySelectorAll('presto-player[data-video-progression=\"true\"][data-video-provider=\"'+learndash_video_data.videos_found_provider+'\"]').forEach(function(element,index){var element_key='presto-player__wrapper-player-'+index;var element_id=element.getAttribute('id');if(typeof element_id==='undefined'||element_id==''){element_id=element_key;element.setAttribute('id',element_id);}ld_video_players[element_key]={};ld_video_players[element_key]['player_key']=element_key;ld_video_players[element_key]['player_type']=learndash_video_data.videos_found_provider;ld_video_players[element_key]['player_id']=element_id;ld_video_players[element_key]['player_wrapper']=element.closest('presto-player');if(typeof ld_video_players[element_key]['player_wrapper']!=='undefined'){ld_video_players[element_key]['player_cookie_key']=ld_video_players[element_key]['player_wrapper'].getAttribute('data-video-cookie-key');}else{ld_video_players[element_key]['player_cookie_key']='';}ld_video_players[element_key]['player_cookie_values']=LearnDash_Video_Progress_initSettings(ld_video_players[element_key]);// Check if video has been completed already.\n// If yes, enable the assets back and end watch players function.\n// If no, then apply all the filters and performs the actions again.\nif(LearnDash_Video_Progress_getSetting(ld_video_players[element_key],'video_state')==='complete'){LearnDash_disable_assets(false);LearnDash_watchPlayersEnd();}else{// Player Seeked.\nwp.hooks.addAction('presto.playerTimeUpdate','presto-player',function(player){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: Video is playing');}LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_duration',player.duration);LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_time',player.currentTime);if(player.duration&&player.duration===player.currentTime){LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_state','complete');if(learndash_video_data.video_debug==='1'){console.log('PRESTO: calling LearnDash_disable_assets(false)');}LearnDash_disable_assets(false);// Stop watching players.\nLearnDash_watchPlayersEnd();}});// Player Playing.\nwp.hooks.addAction('presto.playerPlaying','presto-player',function(player){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: Video is playing');}LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_duration',player.duration);LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_time',player.currentTime);LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_state','play');});// Player Paused.\nwp.hooks.addAction('presto.playerPause','presto-player',function(player){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: Video is paused');}LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_time',player.currentTime);console.log(player.duration);console.log(player.currentTime);LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_state','pause');});// Player Ended.\nwp.hooks.addAction('presto.playerEnded','presto-player',function(player){if(learndash_video_data.video_debug==='1'){console.log('PRESTO: video ended');}if(learndash_video_data.video_debug==='1'){console.log(\"PRESTO: setting 'video_state' to 'complete'\");}LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_time',player.currentTime);LearnDash_Video_Progress_setSetting(ld_video_players[element_key],'video_state','complete');if(learndash_video_data.video_debug==='1'){console.log('PRESTO: calling LearnDash_disable_assets(false)');}LearnDash_disable_assets(false);// Stop watching players.\nLearnDash_watchPlayersEnd();});}});}});return;}else{window.LearnDash_disable_assets(true);wp.hooks.addAction('presto.playerEnded','presto-player',function(){window.LearnDash_disable_assets(false);});}};export default learndash;"],"sourceRoot":""}