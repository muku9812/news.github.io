{"version":3,"sources":["webpack:///./node_modules/@presto-player/components/node_modules/@stencil/core/internal/client/shadow-css.js"],"names":["_parenSuffix","_cssColonHostRe","RegExp","_cssColonHostContextRe","_cssColonSlottedRe","_polyfillHostNoCombinatorRe","_shadowDOMSelectorsRe","_polyfillHostRe","_colonHostRe","_colonSlottedRe","_colonHostContextRe","_commentRe","_commentWithHashRe","_ruleRe","_curlyRe","processRules","input","ruleCallback","inputWithEscapedBlocks","escapeBlocks","nextBlockIndex","escapedString","replace","selector","arguments","length","undefined","content","suffix","contentPrefix","startsWith","blocks","substring","cssRule","rule","concat","inputParts","split","resultParts","escapedBlocks","bracketCount","currentBlockParts","partIndex","part","push","join","convertColonRule","cssText","regExp","partReplacer","_len","m","Array","_key","parts","r","i","p","trim","_polyfillHost","colonHostPartReplacer","host","colonHostContextPartReplacer","indexOf","selectorNeedsScoping","scopeSelector","makeScopeMatcher","test","applyStrictSelectorScope","hostSelector","res","className","_","_scopeSelectorPart","scopedP","lastIndex","replaceBy","before","colon","after","applySimpleSelectorScope","t","matches","match","safeContent","placeholders","index","keep","pseudo","exp","safeSelector","scopedSelector","startIndex","sep","shouldScope","exec","separator","_part","slice","scopedPart","scopeSelectors","scopeSelectorText","slotSelector","commentOriginalSelector","map","shallowPart","scopeCssText","scopeId","hostScopeId","slotScopeId","slotted","slotClass","selectors","_len2","_key2","compound","slottedSelector","prefixSelector","char","orgSelector","addedSelector","trimRight","updatedSelector","convertColonSlotted","convertColonHostContext","convertColonHost","reduce","result","pattern","convertShadowDOMSelectors","slottedSelectors","scopeCss","commentsWithHash","stripComments","orgSelectors","processCommentedSelector","placeholder","comment","scoped","forEach","_ref"],"mappings":"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","file":"analytics/7-c4380ef8.js","sourcesContent":["import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";/*\n Stencil Client Platform v2.5.2 | MIT Licensed | https://stenciljs.com\n */ /**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n *\n * This file is a port of shadowCSS from webcomponents.js to TypeScript.\n * https://github.com/webcomponents/webcomponentsjs/blob/4efecd7e0e/src/ShadowCSS/ShadowCSS.js\n * https://github.com/angular/angular/blob/master/packages/compiler/src/shadow_css.ts\n */var safeSelector=function safeSelector(selector){var placeholders=[];var index=0;var content;// Replaces attribute selectors with placeholders.\n// The WS in [attr=\"va lue\"] would otherwise be interpreted as a selector separator.\nselector=selector.replace(/(\\[[^\\]]*\\])/g,function(_,keep){var replaceBy=\"__ph-\".concat(index,\"__\");placeholders.push(keep);index++;return replaceBy;});// Replaces the expression in `:nth-child(2n + 1)` with a placeholder.\n// WS and \"+\" would otherwise be interpreted as selector separators.\ncontent=selector.replace(/(:nth-[-\\w]+)(\\([^)]+\\))/g,function(_,pseudo,exp){var replaceBy=\"__ph-\".concat(index,\"__\");placeholders.push(exp);index++;return pseudo+replaceBy;});var ss={content:content,placeholders:placeholders};return ss;};var restoreSafeSelector=function restoreSafeSelector(placeholders,content){return content.replace(/__ph-(\\d+)__/g,function(_,index){return placeholders[+index];});};var _polyfillHost='-shadowcsshost';var _polyfillSlotted='-shadowcssslotted';// note: :host-context pre-processed to -shadowcsshostcontext.\nvar _polyfillHostContext='-shadowcsscontext';var _parenSuffix=')(?:\\\\(('+'(?:\\\\([^)(]*\\\\)|[^)(]*)+?'+')\\\\))?([^,{]*)';var _cssColonHostRe=new RegExp('('+_polyfillHost+_parenSuffix,'gim');var _cssColonHostContextRe=new RegExp('('+_polyfillHostContext+_parenSuffix,'gim');var _cssColonSlottedRe=new RegExp('('+_polyfillSlotted+_parenSuffix,'gim');var _polyfillHostNoCombinator=_polyfillHost+'-no-combinator';var _polyfillHostNoCombinatorRe=/-shadowcsshost-no-combinator([^\\s]*)/;var _shadowDOMSelectorsRe=[/::shadow/g,/::content/g];var _selectorReSuffix='([>\\\\s~+[.,{:][\\\\s\\\\S]*)?$';var _polyfillHostRe=/-shadowcsshost/gim;var _colonHostRe=/:host/gim;var _colonSlottedRe=/::slotted/gim;var _colonHostContextRe=/:host-context/gim;var _commentRe=/\\/\\*\\s*[\\s\\S]*?\\*\\//g;var stripComments=function stripComments(input){return input.replace(_commentRe,'');};var _commentWithHashRe=/\\/\\*\\s*#\\s*source(Mapping)?URL=[\\s\\S]+?\\*\\//g;var extractCommentsWithHash=function extractCommentsWithHash(input){return input.match(_commentWithHashRe)||[];};var _ruleRe=/(\\s*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))/g;var _curlyRe=/([{}])/g;var OPEN_CURLY='{';var CLOSE_CURLY='}';var BLOCK_PLACEHOLDER='%BLOCK%';var processRules=function processRules(input,ruleCallback){var inputWithEscapedBlocks=escapeBlocks(input);var nextBlockIndex=0;return inputWithEscapedBlocks.escapedString.replace(_ruleRe,function(){var selector=arguments.length<=2?undefined:arguments[2];var content='';var suffix=arguments.length<=4?undefined:arguments[4];var contentPrefix='';if(suffix&&suffix.startsWith('{'+BLOCK_PLACEHOLDER)){content=inputWithEscapedBlocks.blocks[nextBlockIndex++];suffix=suffix.substring(BLOCK_PLACEHOLDER.length+1);contentPrefix='{';}var cssRule={selector:selector,content:content};var rule=ruleCallback(cssRule);return\"\".concat(arguments.length<=1?undefined:arguments[1]).concat(rule.selector).concat(arguments.length<=3?undefined:arguments[3]).concat(contentPrefix).concat(rule.content).concat(suffix);});};var escapeBlocks=function escapeBlocks(input){var inputParts=input.split(_curlyRe);var resultParts=[];var escapedBlocks=[];var bracketCount=0;var currentBlockParts=[];for(var partIndex=0;partIndex<inputParts.length;partIndex++){var part=inputParts[partIndex];if(part===CLOSE_CURLY){bracketCount--;}if(bracketCount>0){currentBlockParts.push(part);}else{if(currentBlockParts.length>0){escapedBlocks.push(currentBlockParts.join(''));resultParts.push(BLOCK_PLACEHOLDER);currentBlockParts=[];}resultParts.push(part);}if(part===OPEN_CURLY){bracketCount++;}}if(currentBlockParts.length>0){escapedBlocks.push(currentBlockParts.join(''));resultParts.push(BLOCK_PLACEHOLDER);}var strEscapedBlocks={escapedString:resultParts.join(''),blocks:escapedBlocks};return strEscapedBlocks;};var insertPolyfillHostInCssText=function insertPolyfillHostInCssText(selector){selector=selector.replace(_colonHostContextRe,_polyfillHostContext).replace(_colonHostRe,_polyfillHost).replace(_colonSlottedRe,_polyfillSlotted);return selector;};var convertColonRule=function convertColonRule(cssText,regExp,partReplacer){// m[1] = :host(-context), m[2] = contents of (), m[3] rest of rule\nreturn cssText.replace(regExp,function(){for(var _len=arguments.length,m=new Array(_len),_key=0;_key<_len;_key++){m[_key]=arguments[_key];}if(m[2]){var parts=m[2].split(',');var r=[];for(var i=0;i<parts.length;i++){var p=parts[i].trim();if(!p)break;r.push(partReplacer(_polyfillHostNoCombinator,p,m[3]));}return r.join(',');}else{return _polyfillHostNoCombinator+m[3];}});};var colonHostPartReplacer=function colonHostPartReplacer(host,part,suffix){return host+part.replace(_polyfillHost,'')+suffix;};var convertColonHost=function convertColonHost(cssText){return convertColonRule(cssText,_cssColonHostRe,colonHostPartReplacer);};var colonHostContextPartReplacer=function colonHostContextPartReplacer(host,part,suffix){if(part.indexOf(_polyfillHost)>-1){return colonHostPartReplacer(host,part,suffix);}else{return host+part+suffix+', '+part+' '+host+suffix;}};var convertColonSlotted=function convertColonSlotted(cssText,slotScopeId){var slotClass='.'+slotScopeId+' > ';var selectors=[];cssText=cssText.replace(_cssColonSlottedRe,function(){for(var _len2=arguments.length,m=new Array(_len2),_key2=0;_key2<_len2;_key2++){m[_key2]=arguments[_key2];}if(m[2]){var compound=m[2].trim();var suffix=m[3];var slottedSelector=slotClass+compound+suffix;var prefixSelector='';for(var i=m[4]-1;i>=0;i--){var char=m[5][i];if(char==='}'||char===','){break;}prefixSelector=char+prefixSelector;}var orgSelector=prefixSelector+slottedSelector;var addedSelector=\"\".concat(prefixSelector.trimRight()).concat(slottedSelector.trim());if(orgSelector.trim()!==addedSelector.trim()){var updatedSelector=\"\".concat(addedSelector,\", \").concat(orgSelector);selectors.push({orgSelector:orgSelector,updatedSelector:updatedSelector});}return slottedSelector;}else{return _polyfillHostNoCombinator+m[3];}});return{selectors:selectors,cssText:cssText};};var convertColonHostContext=function convertColonHostContext(cssText){return convertColonRule(cssText,_cssColonHostContextRe,colonHostContextPartReplacer);};var convertShadowDOMSelectors=function convertShadowDOMSelectors(cssText){return _shadowDOMSelectorsRe.reduce(function(result,pattern){return result.replace(pattern,' ');},cssText);};var makeScopeMatcher=function makeScopeMatcher(scopeSelector){var lre=/\\[/g;var rre=/\\]/g;scopeSelector=scopeSelector.replace(lre,'\\\\[').replace(rre,'\\\\]');return new RegExp('^('+scopeSelector+')'+_selectorReSuffix,'m');};var selectorNeedsScoping=function selectorNeedsScoping(selector,scopeSelector){var re=makeScopeMatcher(scopeSelector);return!re.test(selector);};var applySimpleSelectorScope=function applySimpleSelectorScope(selector,scopeSelector,hostSelector){// In Android browser, the lastIndex is not reset when the regex is used in String.replace()\n_polyfillHostRe.lastIndex=0;if(_polyfillHostRe.test(selector)){var replaceBy=\".\".concat(hostSelector);return selector.replace(_polyfillHostNoCombinatorRe,function(_,selector){return selector.replace(/([^:]*)(:*)(.*)/,function(_,before,colon,after){return before+replaceBy+colon+after;});}).replace(_polyfillHostRe,replaceBy+' ');}return scopeSelector+' '+selector;};var applyStrictSelectorScope=function applyStrictSelectorScope(selector,scopeSelector,hostSelector){var isRe=/\\[is=([^\\]]*)\\]/g;scopeSelector=scopeSelector.replace(isRe,function(_){return arguments.length<=1?undefined:arguments[1];});var className='.'+scopeSelector;var _scopeSelectorPart=function _scopeSelectorPart(p){var scopedP=p.trim();if(!scopedP){return'';}if(p.indexOf(_polyfillHostNoCombinator)>-1){scopedP=applySimpleSelectorScope(p,scopeSelector,hostSelector);}else{// remove :host since it should be unnecessary\nvar t=p.replace(_polyfillHostRe,'');if(t.length>0){var matches=t.match(/([^:]*)(:*)(.*)/);if(matches){scopedP=matches[1]+className+matches[2]+matches[3];}}}return scopedP;};var safeContent=safeSelector(selector);selector=safeContent.content;var scopedSelector='';var startIndex=0;var res;var sep=/( |>|\\+|~(?!=))\\s*/g;// If a selector appears before :host it should not be shimmed as it\n// matches on ancestor elements and not on elements in the host's shadow\n// `:host-context(div)` is transformed to\n// `-shadowcsshost-no-combinatordiv, div -shadowcsshost-no-combinator`\n// the `div` is not part of the component in the 2nd selectors and should not be scoped.\n// Historically `component-tag:host` was matching the component so we also want to preserve\n// this behavior to avoid breaking legacy apps (it should not match).\n// The behavior should be:\n// - `tag:host` -> `tag[h]` (this is to avoid breaking legacy apps, should not match anything)\n// - `tag :host` -> `tag [h]` (`tag` is not scoped because it's considered part of a\n//   `:host-context(tag)`)\nvar hasHost=selector.indexOf(_polyfillHostNoCombinator)>-1;// Only scope parts after the first `-shadowcsshost-no-combinator` when it is present\nvar shouldScope=!hasHost;while((res=sep.exec(selector))!==null){var separator=res[1];var _part=selector.slice(startIndex,res.index).trim();shouldScope=shouldScope||_part.indexOf(_polyfillHostNoCombinator)>-1;var scopedPart=shouldScope?_scopeSelectorPart(_part):_part;scopedSelector+=\"\".concat(scopedPart,\" \").concat(separator,\" \");startIndex=sep.lastIndex;}var part=selector.substring(startIndex);shouldScope=shouldScope||part.indexOf(_polyfillHostNoCombinator)>-1;scopedSelector+=shouldScope?_scopeSelectorPart(part):part;// replace the placeholders with their original values\nreturn restoreSafeSelector(safeContent.placeholders,scopedSelector);};var scopeSelector=function scopeSelector(selector,scopeSelectorText,hostSelector,slotSelector){return selector.split(',').map(function(shallowPart){if(slotSelector&&shallowPart.indexOf('.'+slotSelector)>-1){return shallowPart.trim();}if(selectorNeedsScoping(shallowPart,scopeSelectorText)){return applyStrictSelectorScope(shallowPart,scopeSelectorText,hostSelector).trim();}else{return shallowPart.trim();}}).join(', ');};var scopeSelectors=function scopeSelectors(cssText,scopeSelectorText,hostSelector,slotSelector,commentOriginalSelector){return processRules(cssText,function(rule){var selector=rule.selector;var content=rule.content;if(rule.selector[0]!=='@'){selector=scopeSelector(rule.selector,scopeSelectorText,hostSelector,slotSelector);}else if(rule.selector.startsWith('@media')||rule.selector.startsWith('@supports')||rule.selector.startsWith('@page')||rule.selector.startsWith('@document')){content=scopeSelectors(rule.content,scopeSelectorText,hostSelector,slotSelector);}var cssRule={selector:selector.replace(/\\s{2,}/g,' ').trim(),content:content};return cssRule;});};var scopeCssText=function scopeCssText(cssText,scopeId,hostScopeId,slotScopeId,commentOriginalSelector){cssText=insertPolyfillHostInCssText(cssText);cssText=convertColonHost(cssText);cssText=convertColonHostContext(cssText);var slotted=convertColonSlotted(cssText,slotScopeId);cssText=slotted.cssText;cssText=convertShadowDOMSelectors(cssText);if(scopeId){cssText=scopeSelectors(cssText,scopeId,hostScopeId,slotScopeId);}cssText=cssText.replace(/-shadowcsshost-no-combinator/g,\".\".concat(hostScopeId));cssText=cssText.replace(/>\\s*\\*\\s+([^{, ]+)/gm,' $1 ');return{cssText:cssText.trim(),slottedSelectors:slotted.selectors};};var scopeCss=function scopeCss(cssText,scopeId,commentOriginalSelector){var hostScopeId=scopeId+'-h';var slotScopeId=scopeId+'-s';var commentsWithHash=extractCommentsWithHash(cssText);cssText=stripComments(cssText);var orgSelectors=[];if(commentOriginalSelector){var processCommentedSelector=function processCommentedSelector(rule){var placeholder=\"/*!@___\".concat(orgSelectors.length,\"___*/\");var comment=\"/*!@\".concat(rule.selector,\"*/\");orgSelectors.push({placeholder:placeholder,comment:comment});rule.selector=placeholder+rule.selector;return rule;};cssText=processRules(cssText,function(rule){if(rule.selector[0]!=='@'){return processCommentedSelector(rule);}else if(rule.selector.startsWith('@media')||rule.selector.startsWith('@supports')||rule.selector.startsWith('@page')||rule.selector.startsWith('@document')){rule.content=processRules(rule.content,processCommentedSelector);return rule;}return rule;});}var scoped=scopeCssText(cssText,scopeId,hostScopeId,slotScopeId);cssText=[scoped.cssText].concat(_toConsumableArray(commentsWithHash)).join('\\n');if(commentOriginalSelector){orgSelectors.forEach(function(_ref){var placeholder=_ref.placeholder,comment=_ref.comment;cssText=cssText.replace(placeholder,comment);});}scoped.slottedSelectors.forEach(function(slottedSelector){cssText=cssText.replace(slottedSelector.orgSelector,slottedSelector.updatedSelector);});return cssText;};export{scopeCss};"],"sourceRoot":""}